<article class="content" aria-labelledby="page-heading">
    <nav class="container breadcrumb" aria-label="breadcrumbs">
        <ul>
            <li><a href="/">Home</a></li>
            <li>
                <a {{#if (isSubPage page)}} href="../../"{{else}}href="../"{{/if}}>Documentation</a>
            </li>
            {{#if (isSubPage page)}}
            <li>
                <a href="../">
                    {{#compare page.category '===' 'user-guide'}}
                        User guide
                    {{else}}
                        Developer guide
                    {{/compare}}
                </a>
            </li>
            {{/if}}
            <li aria-current="location">{{page.title}}</li>
        </ul>
    </nav>
    <header class="page-intro">
        <h1 id="page-heading">{{page.title}}</h1>
    </header>
    <section class="section">
        <div class="layout layout--sidebar">
            <div class="module module--primary wrap-text">
                {{{page.content}}}
            </div>
            <div class="module module--secondary table-of-contents treeview" role="navigation">
                <ul role="tree" aria-labelledby="page-heading" tabindex="0">
                {{#each pages}}
                    {{#if this}}
                        <li role="treeitem" aria-label="subsection" tabindex="0"
                        {{#if (expandToC ../page this)}}
                            aria-expanded = "true"
                        {{else}}
                            aria-expanded="false"
                        {{/if}}>
                            {{#hasTocTitle @key}}
                            <div {{#if (expandToC ../../page ../this)}}
                                         class="toc-section-title--active"
                                    {{else}}
                                         class="toc-section-title"
                                    {{/if}}>
                                <span class="text">{{@key}}</span>
                                <span class="icon"></span>
                            </div>
                            {{/hasTocTitle}}

                                <ul class="toc-subsection-title" role="group">
                                    {{#each this}}
                                        <li role="treeitem"
                                        {{#if (isSelected ../../page permalink)}}
                                            aria-selected="true"
                                        {{/if}}>
                                            <div {{#compare ../../page.title '===' title}}
                                                        class="toc-subsection-title--active"
                                                        aria-current="location"
                                                    {{else}}
                                                        class="toc-subsection-title"
                                                    {{/compare}}>
                                                    <a class="text" href="{{permalink}}" {{#unless (expandToC ../../page ../this)}}tabindex="-1"{{/unless}}>
                                                        {{title}}
                                                    </a>
                                            </div>
                                        </li>
                                    {{/each}}
                                </ul>
                            </li>
                        {{/if}}
                {{/each}}
                </ul>
            </div>
        </div>
    </section>
</article>
