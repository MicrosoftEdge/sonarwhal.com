<!doctype html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <title>Sonar</title>
        <meta name="description" content="sonar website">
        <meta name="viewport" content="width=device-width">

        <link rel="icon" type="image/png" href="/images/favicon-32x32.png" sizes="32x32">
        <link rel="icon" type="image/png" href="/images/favicon-16x16.png" sizes="16x16">

        <link rel="stylesheet" href="/core/css/base.css">
        <link rel="stylesheet" href="/core/css/color.css">
        <link rel="stylesheet" href="/core/css/footer.css">
        <link rel="stylesheet" href="/core/css/helpers.css">
        <link rel="stylesheet" href="/core/css/layouts.css">
        <link rel="stylesheet" href="/core/css/navigation.css">
        <link rel="stylesheet" href="/core/css/search-results.css">
        <link rel="stylesheet" href="/core/css/structure.css">
        <link rel="stylesheet" href="/core/css/type.css">
        <link rel="stylesheet" href="/core/css/highlight.css">
        <link rel="stylesheet" href="/components/breadcrumb/breadcrumb.css">
        <link rel="stylesheet" href="/core/css/controls.css">
            <link rel="stylesheet" href="/core/css/code.css">
            <link rel="stylesheet" href="/core/css/table-of-contents.css">
        <link href="https://fonts.googleapis.com/css?family=Montserrat:200,300,400,500,600" rel="stylesheet">
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/2/docsearch.min.css">
    </head>

    <body>
            <header class="header">
                <div class="nav-bar container">
                    <nav class="nav">
                        <a href="/" class="clear"><img src="/images/sonar-logo.svg" alt="sonar" class="header__logo navbar__navitem"></a>
                        <ul class="nav__navbar">
                                <li class="navbar__navitem">
                                    <a role="button" href="/scanner" id="scanner" aria-haspopup="true" aria-expanded="false" aria-controls="submenu-scanner"
                                    class="navitem__button ">Scanner</a>
                                </li>
                                <li class="navbar__navitem">
                                    <a role="button" href="/docs" id="docs" aria-haspopup="true" aria-expanded="false" aria-controls="submenu-docs"
                                    class="navitem__button expandable">Documentation</a>
                                        <ul role="group" id="submenu-docs" class="navbar__submenu" aria-hidden="true">
                                                <li><a href="/docs/developer-guide/">Developer Guide</a></li>
                                                <li><a href="/docs/user-guide/">User Guide</a></li>
                                        </ul>
                                </li>
                                <li class="navbar__navitem">
                                    <a role="button" href="/about/" id="about" aria-haspopup="true" aria-expanded="false" aria-controls="submenu-about"
                                    class="navitem__button expandable">About</a>
                                        <ul role="group" id="submenu-about" class="navbar__submenu" aria-hidden="true">
                                                <li><a href="/about/faq/">Faq</a></li>
                                                <li><a href="/about/governance/">Governance</a></li>
                                                <li><a href="/about/contributors/">Contributors</a></li>
                                                <li><a href="/about/code-of-conduct/">Code of Conduct</a></li>
                                        </ul>
                                </li>
                        </ul>
                        <div class="nav-bar__input">
                            <input type="search" id="search-input" placeholder="Search...">
                        </div>
                    </nav>
                    <button class="header__toggle mobile-nav-button" aria-label="Menu"></button>
                </div>
            </header>
            <main class="container">
                    <article class="content" aria-labelledby="page-heading">
                        <nav class="container breadcrumb" aria-label="breadcrumbs">
                            <ul>
                                <li><a href="/">Home</a></li>
                                <li><a href="../../">Documentation</a></li>
                                <li>
                                    <a href="../../">
                                            Developer Guide
                                    </a>
                                </li>
                                <li aria-current="location">How to evaluate JavaScript</li>
                            </ul>
                        </nav>
                        <header class="page-intro">
                            <h1 id="page-heading">Developer Guide</h1>
                            <p class="subtitle">Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum</p>
                        </header>
                        <section class="section">
                            <div class="layout layout--sidebar">
                                <div class="module module--primary">
                                    <h1 id="How-to-evaluate-JavaScript"><a href="#How-to-evaluate-JavaScript" class="headerlink" title="How to evaluate JavaScript"></a>How to evaluate JavaScript</h1><p>Sometimes a rule needs to evaluate some JavaScript in the context of
                    the page. To do that you need to use <code>context.evaluate</code>. This method
                    will always return a <code>Promise</code> even if your code does not return one.</p>
                    <p>One important thing is that your code needs to be wrapped in an
                    Immediate Invoked Function Expression to work.</p>
                    <p>The following scripts will work:</p>
                    <!-- eslint-disable -->
                    <figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> script =</div><div class="line"><span class="string">`(function() &#123;</span></div><div class="line">    return true;</div><div class="line">&#125;())`;</div><div class="line"></div><div class="line">context.evaluate(script);</div></pre></td></tr></table></figure>
                    <figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> script =</div><div class="line"><span class="string">`(function() &#123;</span></div><div class="line">    return Promise.resolve(true);</div><div class="line">&#125;())`;</div><div class="line"></div><div class="line">context.evaluate(script);</div></pre></td></tr></table></figure>
                    <p>The following does not:</p>
                    <figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> script = <span class="string">`return true;`</span>;</div><div class="line"></div><div class="line">context.evaluate(script);</div></pre></td></tr></table></figure>
                    <figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> script = <span class="string">`return Promise.resolve(true);`</span>;</div><div class="line"></div><div class="line">context.evaluate(script);</div></pre></td></tr></table></figure>
                    
                                </div>
                                <div class="module module--secondary table-of-contents" role="navigation">
                                            <p class="toc-section-title--active">
                                                <a href="/docs/developer-guide/collectors/index.html">
                                                collectors
                                                </a>
                                            </p>
                                        <ul class="toc-subsection-title">
                                                <li>
                                                    <a href="/docs/developer-guide/collectors/how-to-develop-a-collector.html"
                                                            class="toc-subsection-title"
                                                        >
                                                        How to develop a collector
                                                    </a>
                                                </li>
                                        </ul>
                                            <p class="toc-section-title--active">
                                                <a href="/docs/developer-guide/rules/index.html">
                                                rules
                                                </a>
                                            </p>
                                        <ul class="toc-subsection-title">
                                                <li>
                                                    <a href="/docs/developer-guide/rules/how-to-test-rules.html"
                                                            class="toc-subsection-title"
                                                        >
                                                        How to test rules
                                                    </a>
                                                </li>
                                                <li>
                                                    <a href="/docs/developer-guide/rules/how-to-evaluate-javascript.html"
                                                            class="toc-subsection-title--active"
                                                            aria-current="location"
                    >
                                                        How to evaluate JavaScript
                                                    </a>
                                                </li>
                                                <li>
                                                    <a href="/docs/developer-guide/rules/how-to-interact-with-other-services.html"
                                                            class="toc-subsection-title"
                                                        >
                                                        How to interact with other services
                                                    </a>
                                                </li>
                                                <li>
                                                    <a href="/docs/developer-guide/rules/how-to-create-a-rule.html"
                                                            class="toc-subsection-title"
                                                        >
                                                        How to create a rule
                                                    </a>
                                                </li>
                                        </ul>
                                            <p class="toc-section-title--active">
                                                <a href="/docs/developer-guide/events/index.html">
                                                events
                                                </a>
                                            </p>
                                        <ul class="toc-subsection-title">
                                                <li>
                                                    <a href="/docs/developer-guide/events/list-of-events.html"
                                                            class="toc-subsection-title"
                                                        >
                                                        List of events emitted by a collector
                                                    </a>
                                                </li>
                                        </ul>
                                        <ul class="toc-subsection-title">
                                        </ul>
                                </div>
                            </div>
                        </section>
                    </article>


            </main>
        <script src="/js/script.js"></script>
        <script src="/core/scripts/form-validation.js"></script>
        <script src="/components/accordion/accordion.js"></script>
        <script src="https://cdn.jsdelivr.net/docsearch.js/2/docsearch.min.js"></script>
        <script>
            docsearch({
                apiKey: '2ee58f908e6d720c4f72a9645ce0e857', // search-only API key, okay for frontend
                indexName: 'sonarwhal',
                inputSelector: '#search-input',
                appId: '0R8E5SPAFP',
                debug: true // set to true if need to debug css
            });
        </script>
    </body>
</html>
