<!doctype html><html lang="en"><head><meta charset="utf-8">  <title>Create a custom hint step-by-step | webhint documentation</title>  <meta property="og:url" content="https://webhint.io"><meta property="og:type" content="website"><meta property="og:image" content="https://webhint.io/static/images/apple-touch-icon-c01d89d4f3.png"><meta property="og:description" content="webhint, a linting tool for the web focused on best practices and flexibility for the end user"><meta property="og:title" content="Create a custom hint step-by-step"><meta name="description" content="webhint, a linting tool for the web focused on best practices and flexibility for the end user"><meta name="viewport" content="width=device-width"><meta name="theme-color" content="#4046dd"><link rel="manifest" href="/static/site-9ddc01b15a.webmanifest"><link rel="apple-touch-icon" href="/static/images/apple-touch-icon-c01d89d4f3.png"><link type="application/opensearchdescription+xml" rel="search" href="/static/opensearch-6d9e5a0d07.xml" title="webhint"> <link rel="preload" href="/static/fonts/montserrat-400-501ce09c42.woff2" as="font" type="font/woff2" crossorigin><link rel="preload" href="/static/fonts/montserrat-300-0a7c6df06e.woff2" as="font" type="font/woff2" crossorigin><link rel="preload" href="/static/fonts/source-sans-pro-76d8cbb049.woff2" as="font" type="font/woff2" crossorigin><link rel="preload" href="/static/fonts/montserrat-500-f0f2716c5f.woff2" as="font" type="font/woff2" crossorigin><link rel="stylesheet" href="/static/styles/common-f214f33c0e.css" integrity="sha384-cDhs8IivMHLpN1JvOWoXQwAPO8Z7/zXdSUlaHWihlFDUAGaS77VY3VJDheGLvCQp" crossorigin="anonymous"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.css" integrity="sha384-m2ikRCzP5EF96BXBKTjWxBJqZRlS6qNhm7+rE2Rvl8fIkEANrThfw+EVyeePWhM4" crossorigin="anonymous"> <link rel="stylesheet" href="/static/styles/docs-d7f231991c.css" integrity="sha384-/Sc4ciof042QnsY1Ddjl4AD1/AwIBfml96vL/PMusDqWzC7mWtmofPleP4kVTE/w" crossorigin="anonymous">  <link rel="icon" href="/static/images/scan/favicon-32x32-fede2c8c9f.png">  </head><body> <div id="disclaimer" class="disclaimer">This site uses cookies for analytics. By continuing to browse this site, you agree to this use. <button type="button" class="close" aria-label="close">X</button></div> <header class="header"><div class="header-social"><div class="header-social__container container"><span class="openjsf-header">An <a target="_blank" rel="noopener" href="https://openjsf.org" aria-label="Visit the OpenJS Foundation home page">OpenJS Foundation</a> Project</span><ul class="header-social__list"><li class="github-icon"><a target="_blank" rel="noopener" href="https://github.com/webhintio" aria-label="Follow webhint on GitHub"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 25 25"><path class="github-icon-svg-header" d="M12.5.4C5.7.4.2 5.9.2 12.7c0 5.4 3.5 10 8.4 11.7.6.1.8-.3.8-.6v-2.1C6 22.4 5.3 20 5.3 20c-.6-1.4-1.4-1.8-1.4-1.8-1.1-.7.1-.7.1-.7 1.2.1 1.9 1.3 1.9 1.3 1.1 1.9 2.9 1.3 3.6 1 .1-.8.4-1.3.8-1.6-2.7-.3-5.6-1.4-5.6-6.1 0-1.3.5-2.4 1.3-3.3-.2-.4-.6-1.6 0-3.3 0 0 1-.3 3.4 1.3 1-.3 2-.4 3.1-.4 1 0 2.1.1 3.1.4C17.9 5.2 19 5.5 19 5.5c.7 1.7.2 2.9.1 3.3.8.9 1.3 2 1.3 3.3 0 4.7-2.9 5.8-5.6 6.1.4.4.8 1.1.8 2.3v3.4c0 .3.2.7.8.6 4.9-1.6 8.4-6.2 8.4-11.7C24.8 5.9 19.3.4 12.5.4"/></svg></a></li><li class="twitter-icon"><a target="_blank" rel="noopener" href="https://twitter.com/webhintio" aria-label="Follow webhint on Twitter"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 25 24"><path class="twitter-icon-svg-header" d="M25 4.4c-.9.4-1.9.7-2.9.8 1-.6 1.8-1.6 2.2-2.8-1 .6-2.1 1-3.2 1.2-.9-1-2.2-1.6-3.7-1.6-2.8 0-5 2.3-5 5 0 .4 0 .8.1 1.2C8.3 8 4.6 6 2.1 2.9c-.4.8-.7 1.6-.7 2.6 0 1.8.9 3.3 2.2 4.2-.8-.1-1.5-.3-2.2-.7v.1c0 2.4 1.7 4.5 4.1 5-.4.1-.9.2-1.3.2-.3 0-.6 0-.9-.1.6 2 2.5 3.5 4.7 3.5-1.9 1.3-4 2.1-6.4 2.1-.4 0-.8 0-1.2-.1C2.6 21.2 5.3 22 8.1 22c9.3 0 14.4-7.7 14.4-14.4v-.7c1-.6 1.8-1.5 2.5-2.5"/></svg></a></li><li class="medium-icon"><a target="_blank" rel="noopener" href="https://medium.com/webhint" aria-label="Follow webhint on Medium"><svg xmlns="http://www.w3.org/2000/svg" viewBox="4 2 40 40"><path class="medium-icon-svg-header" d="M5 40V5h35v35H5zm8.56-12.63c0 .56-.03.7-.32 1.03l-2.45 3v.38h6.9v-.4l-2.4-2.98c-.3-.34-.35-.5-.35-1.03v-8.95l6.13 13.36h.7L27 18.42v10.64c0 .3 0 .35-.2.53L25 31.4v.37h9.2v-.4l-1.82-1.8c-.2-.17-.22-.23-.22-.52v-13.1c0-.3.03-.36.2-.54l1.83-1.8v-.32h-6.5L23.1 24.8l-5.2-11.55h-6.8v.4l2.14 2.63c.24.3.3.37.3.77V27.4z"/></svg></a></li></ul></div></div><div class="nav-bar container"><nav class="nav"><a href="/" class="clear logo--container"><img src="/static/images/webhint-logo-a56febcd8b.svg" alt="webhint" class="header__logo navbar__navitem"></a><ul class="nav__navbar">  <li class="navbar__navitem"><a role="button" href="/docs/user-guide/" id="install" aria-haspopup="true" aria-expanded="false"  class="navitem__button expandable">Get webhint</a>  <ul role="group" id="submenu-install" class="navbar__submenu" hidden>  <li><a href="/docs/user-guide/extensions/extension-browser/">In browser DevTools</a></li>  <li><a href="/docs/user-guide/extensions/vscode-webhint/">In VS Code</a></li>  <li><a href="/docs/user-guide/">Standalone CLI</a></li>  </ul>  </li>  <li class="navbar__navitem"><a role="button" href="" id="docs" aria-haspopup="true" aria-expanded="false"  aria-controls="submenu-docs"  class="navitem__button expandable">Documentation</a>  <ul role="group" id="submenu-docs" class="navbar__submenu" hidden>  <li><a href="/docs/contributor-guide/">Contributor Guide</a></li>  <li><a href="/docs/user-guide/hints/">Hints</a></li>  <li><a href="/docs/user-guide/">User Guide</a></li>  </ul>  </li>  <li class="navbar__navitem"><a role="button" href="/about/" id="about" aria-haspopup="true" aria-expanded="false"  aria-controls="submenu-about"  class="navitem__button expandable">About</a>  <ul role="group" id="submenu-about" class="navbar__submenu" hidden>  <li><a href="/about/project_charter/">Project Charter</a></li>  <li><a href="/about/faq/">FAQ</a></li>  <li><a href="/about/changelog/">Changelog</a></li>  <li><a href="/about/governance/">Governance</a></li>  <li><a target="_blank" rel="noopener" href="https://js.foundation/community/code-of-conduct">Code of Conduct</a></li>  </ul>  </li>  </ul><div class="nav-bar--container"><div class="nav-bar__input"><form role="search"><label for="search-input" class="visually-hidden">Search the documentation</label> <input type="search" id="search-input" placeholder="Search Documentation" name="q" aria-label="Search"> <button type="submit" aria-label="search" class="button-search"></button></form></div><button type="button" class="mobile-close-button" aria-label="Close Search Overlay">Close</button></div><div class="nav-bar--mobile-buttons"><button type="button" class="header__toggle mobile-nav-button" aria-label="Menu"></button> <button type="button" class="header__toggle mobile-search-button" aria-label="Search"></button></div></nav></div></header> <main class="container">    <article class="content" aria-labelledby="page-heading"><nav class="breadcrumb" aria-label="breadcrumbs"><ul><li><a href="/">Home</a></li><li><a href="../../../">Documentation</a></li>  <li><a href="../../" class="guide-category"> Contributor guide </a></li>  <li aria-current="location">Create a custom hint step-by-step</li></ul></nav><header class="page-intro"><h1 id="page-heading">Create a custom hint step-by-step</h1><div class="documentation-actions"><ul><li><a target="_blank" href="https://github.com/webhintio/hint/edit/main/packages/hint/docs/contributor-guide/guides/create-custom-hint.md">Edit</a></li></ul></div></header><div class="section" id="main"><div class="layout layout--sidebar"><div class="module module--secondary mobile-view"><ul class="toc-mobile-view"><li><p role="button" id="mobile-toc" aria-controls="mobile-toc-submenu" aria-expanded="false" aria-haspopup="true" class="toc-mobile-view__button expandable"> Contributor guide </p><ul role="group" class="toc-mobile-view__dropdown" id="mobile-toc-submenu" hidden>  <li class="dropdown__subitem"><a href="../../" class="subitem--single">Getting Started</a></li>    <li class="dropdown__subitem"><p>Getting started</p><ul>   <li class="subitem"><a href="https://webhint.io/docs/contributor-guide/getting-started/architecture/">Architecture</a></li>  <li class="subitem"><a href="https://webhint.io/docs/contributor-guide/getting-started/development-environment/">Development environment</a></li>  <li class="subitem"><a href="https://webhint.io/docs/contributor-guide/getting-started/events/">Events</a></li>  <li class="subitem"><a href="https://webhint.io/docs/contributor-guide/getting-started/pull-requests/">Pull requests</a></li>  </ul></li>  <li class="dropdown__subitem"><p>Guides</p><ul>   <li class="subitem"><a href="https://webhint.io/docs/contributor-guide/guides/create-custom-hint/">Create a custom hint step-by-step</a></li>  </ul></li>  <li class="dropdown__subitem"><p>How to</p><ul>   <li class="subitem"><a href="https://webhint.io/docs/contributor-guide/how-to/configuration/">Create a custom shareable configuration</a></li>  <li class="subitem"><a href="https://webhint.io/docs/contributor-guide/how-to/connector/">Develop a connector</a></li>  <li class="subitem"><a href="https://webhint.io/docs/contributor-guide/how-to/formatter/">Develop a formatter</a></li>  <li class="subitem"><a href="https://webhint.io/docs/contributor-guide/how-to/hint/">Develop a hint</a></li>  <li class="subitem"><a href="https://webhint.io/docs/contributor-guide/how-to/parser/">Develop a parser</a></li>  <li class="subitem"><a href="https://webhint.io/docs/contributor-guide/how-to/common-hint-scenarios/">Implement common hint scenarios</a></li>  <li class="subitem"><a href="https://webhint.io/docs/contributor-guide/how-to/test-rules/">Test a hint</a></li>  </ul></li>  </ul></li></ul></div><div class="module module--secondary table-of-contents treeview main-view" role="navigation"><ul role="tree" aria-labelledby="page-heading" tabindex="0">  <li role="treeitem" aria-label="subsection" tabindex="0" aria-expanded="false"><div class=" toc-section-title "><span class="text">Getting started</span><span class="icon"></span></div><ul role="group">  <li role="treeitem" aria-selected="false"><div class=" toc-subsection-title " aria-current=""><a class="text" href="https://webhint.io/docs/contributor-guide/getting-started/architecture/" tabindex="-1"> Architecture </a></div></li>  <li role="treeitem" aria-selected="false"><div class=" toc-subsection-title " aria-current=""><a class="text" href="https://webhint.io/docs/contributor-guide/getting-started/development-environment/" tabindex="-1"> Development environment </a></div></li>  <li role="treeitem" aria-selected="false"><div class=" toc-subsection-title " aria-current=""><a class="text" href="https://webhint.io/docs/contributor-guide/getting-started/events/" tabindex="-1"> Events </a></div></li>  <li role="treeitem" aria-selected="false"><div class=" toc-subsection-title " aria-current=""><a class="text" href="https://webhint.io/docs/contributor-guide/getting-started/pull-requests/" tabindex="-1"> Pull requests </a></div></li>  </ul></li>  <li role="treeitem" aria-label="subsection" tabindex="0" aria-expanded="true"><div class=" toc-section-title--active "><span class="text">Guides</span><span class="icon"></span></div><ul role="group">  <li role="treeitem" aria-selected="true"><div class=" toc-subsection-title--active " aria-current="location"><a class="text" href="https://webhint.io/docs/contributor-guide/guides/create-custom-hint/" tabindex="0"> Create a custom hint step-by-step </a></div></li>  </ul></li>  <li role="treeitem" aria-label="subsection" tabindex="0" aria-expanded="false"><div class=" toc-section-title "><span class="text">How to</span><span class="icon"></span></div><ul role="group">  <li role="treeitem" aria-selected="false"><div class=" toc-subsection-title " aria-current=""><a class="text" href="https://webhint.io/docs/contributor-guide/how-to/configuration/" tabindex="-1"> Create a custom shareable configuration </a></div></li>  <li role="treeitem" aria-selected="false"><div class=" toc-subsection-title " aria-current=""><a class="text" href="https://webhint.io/docs/contributor-guide/how-to/connector/" tabindex="-1"> Develop a connector </a></div></li>  <li role="treeitem" aria-selected="false"><div class=" toc-subsection-title " aria-current=""><a class="text" href="https://webhint.io/docs/contributor-guide/how-to/formatter/" tabindex="-1"> Develop a formatter </a></div></li>  <li role="treeitem" aria-selected="false"><div class=" toc-subsection-title " aria-current=""><a class="text" href="https://webhint.io/docs/contributor-guide/how-to/hint/" tabindex="-1"> Develop a hint </a></div></li>  <li role="treeitem" aria-selected="false"><div class=" toc-subsection-title " aria-current=""><a class="text" href="https://webhint.io/docs/contributor-guide/how-to/parser/" tabindex="-1"> Develop a parser </a></div></li>  <li role="treeitem" aria-selected="false"><div class=" toc-subsection-title " aria-current=""><a class="text" href="https://webhint.io/docs/contributor-guide/how-to/common-hint-scenarios/" tabindex="-1"> Implement common hint scenarios </a></div></li>  <li role="treeitem" aria-selected="false"><div class=" toc-subsection-title " aria-current=""><a class="text" href="https://webhint.io/docs/contributor-guide/how-to/test-rules/" tabindex="-1"> Test a hint </a></div></li>  </ul></li>  </ul></div><div class="module module--primary wrap-text">   <h1 id=create-a-custom-hint-step-by-step>Create a custom hint step-by-step<a href="#create-a-custom-hint-step-by-step" class="headerlink" title="Create a custom hint step-by-step"></a></h1><p>Imagine that we have a new change in the webhint website - we’d like
to add a footer containing the copyright information <code>(c) webhint</code> and
we need to verify that this footer is always present in the page before
deployment. Let’s see how we can write this as a hint for webhint so
that we can use webhint to validate the copyright in the footer for us.</p>
<h2 id=what-is-a-hint>What is a hint?<a href="#what-is-a-hint" class="headerlink" title="What is a hint?"></a></h2><p>First of all, let’s grasp what a hint is and how it works. A hint is at
the core of webhint, it is a check that is used to verify if something
was done as intended. In our example, if a page doesn’t have a footer or
has a footer but misses the <code>(c) webhint part</code>, the hint fails. Otherwise
it passes. A hint subscribes to one or more events that are emitted from
a connector. A connector is the way webhint gets the information about
a website or a resource using a browser, or something different that reads
files from disk. For example, if a hint subscribes to <code>fetch::end::&lt;resource-type&gt;</code>,
it means this hint will run each time the connector finishes downloading
a resource file.</p>
<h2 id=what-is-it-like-to-create-a-new-hint>What is it like to create a new hint?<a href="#what-is-it-like-to-create-a-new-hint" class="headerlink" title="What is it like to create a new hint?"></a></h2><p>The recommended way to create a new hint is to use <code>npm create hint</code> from
the CLI.</p>
<blockquote>
<p><strong>Note for core hints</strong>: If you are creating a hint for the main repo you should
follow the below steps:</p>
<ul>
<li>Make sure to run <code>yarn</code> and <code>yarn build</code> in root directory.</li>
<li>Then go to <code>create-hint</code> package ( <code>cd packages/create-hint</code> ).</li>
<li>Make executable release. run <code>yarn webpack</code>.</li>
<li>Now run <code>npm create hint</code> from <code>packages</code> folder.</li>
</ul>
<p>The generated files will be
slightly different (references and task will change a bit).</p>
</blockquote>
<p>At this point, a wizard will ask a series of questions relevant to the new hint,
including the name, description, category, etc. In particular, you will be asked
to select the category of the use case for the new hints. Depending on the
answer, webhint will automatically decide which <code>event</code>(s) it should subscribe
the hint to. Of course, you can subscribe to others if needed. The list below
might help if you wonder what those options mean:</p>
<ul>
<li><code>DOM</code>: Is your hint checking a particular <code>DOM</code> element like <code>head</code> or
<code>link</code> ?</li>
<li><code>Resource Request</code>: Does your hint rely on the loading of a resource like
<code>script</code>, <code>stylesheet</code>, or an <code>image</code>?</li>
<li><code>Third Party Service</code>: Does your hint integrate with a third-party service?</li>
<li><code>JavaScript Injection</code>: Do you need to inject a script in the page and wait
for the results to execute your test?</li>
</ul>
<p>In our case, we’d like to check the content of the footer element, so we select
DOM and then type input footer. Wait for a second… Voilà! A new folder called
<code>hint-validate-footer</code> is created, with a bunch of templates in it. The main
structure of the folder is like this:</p>
<figure class="highlight text"><table><tr><td class="code"><pre>hint-validate-footer
├── src
│   └── hints
│   │      └── validate-footer
│   │             └── validate-footer.ts
│   └── index.ts
└── tests
    └── validate-footer
          └── test.ts</pre></td></tr></table></figure><p>The next main thing to do is to populate the <code>validate-footer.ts</code> and <code>test.ts</code>
with our actual hint and tests. But before that, we need to navigate to the hint
folder and run <code>npm run init</code>. This command does two things:</p>
<ol>
<li>Install all the dependencies.</li>
<li>Build the project, which compiles the TypeScript to JavaScript in the <code>dist</code>
folder (support for creating JavaScript hints via webhint’s CLI will be
added in a future release, but you can manually do it now).</li>
</ol>
<p><strong>Note for core hints</strong>: Instead of running <code>npm run init</code> run <code>yarn</code> and
<code>yarn build</code>. <code>webhint</code> is a monorepo built on top of <code>yarn</code> workspaces and this
is the proper way to link the modules.</p>
<p>Do remember that since a compilation is needed, you have to build every time
after you make changes to the <code>.ts</code> files. Or alternatively, you run <code>npm run watch:ts</code> in the terminal and the project builds itself after each update. <em>If
your debugger never stops at the break point you set up, it’s very likely
because you forgot to build your project after making changes.</em></p>
<h2 id=how-do-we-write-the-hint>How do we write the hint?<a href="#how-do-we-write-the-hint" class="headerlink" title="How do we write the hint?"></a></h2><p>Now navigate to <code>src/hints/validate-footer/validate-footer.ts</code>. You can see that
there is already some code there. The hint class contains a constructor
<code>constructor</code> and a static property <code>meta</code>.
At the end of the <code>constructor</code>, it use <code>context.on</code> to subscribe the hint
to events the hint needs to listen to. The parameters for  <code>contexts.on</code> are the
name of the event and the validating function triggered upon the
events. In the generated template by the wizard, the <code>element::footer</code> event is
already populated for us so we can focus on implementing the actual
validateFooter function. As shown in the code below, we have access to the
footer element in the page and use that for our check - if the HTML doesn’t
include the target string, we simply file a report by calling <code>context.report</code>
with the <em>resource</em> (URL), the <em>element</em> (footer), and the <em>error message</em>.</p>
<figure class="highlight ts"><table><tr><td class="code"><pre><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">FooterHint</span> <span class="hljs-keyword">implements</span> IHint &#123;
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">readonly</span> <span class="hljs-attr">meta</span>: <span class="hljs-title class_">HintMetadata</span> = &#123;
        <span class="hljs-attr">docs</span>: &#123;
            <span class="hljs-attr">category</span>: <span class="hljs-title class_">Category</span>.<span class="hljs-property">other</span>,
            <span class="hljs-attr">description</span>: <span class="hljs-string">`A hint to validate footer`</span>
        &#125;,
        <span class="hljs-attr">id</span>: <span class="hljs-string">&#x27;footer&#x27;</span>,
        <span class="hljs-attr">schema</span>: [],
        <span class="hljs-attr">scope</span>: <span class="hljs-title class_">HintScope</span>.<span class="hljs-property">any</span>
    &#125;

    <span class="hljs-keyword">public</span> <span class="hljs-title function_">constructor</span>(<span class="hljs-params">context: HintContext</span>) &#123;
        <span class="hljs-keyword">const</span> stringToBeIncluded = <span class="hljs-string">`(c) webhint`</span>;
        <span class="hljs-keyword">const</span> <span class="hljs-title function_">validateFooter</span> = (<span class="hljs-params">elementFound: ElementFound</span>) =&gt; &#123;
            <span class="hljs-keyword">const</span> &#123; element, resource &#125; = elementFound;
            <span class="hljs-keyword">const</span> footerHTML = element.<span class="hljs-property">outerHTML</span>;

            <span class="hljs-title function_">debug</span>(<span class="hljs-string">`Validating hint validate-footer`</span>);

            <span class="hljs-keyword">if</span> (!footerHTML.<span class="hljs-title function_">includes</span>(stringToBeIncluded)) &#123;
                <span class="hljs-keyword">const</span> message = <span class="hljs-string">`&quot;<span class="hljs-subst">$&#123;stringToBeIncluded&#125;</span>&quot; is not included in the footer.`</span>;

                context.<span class="hljs-title function_">report</span>(resource, message, &#123; element &#125;);
            &#125;
        &#125;;

        context.<span class="hljs-title function_">on</span>(<span class="hljs-string">&#x27;element::footer&#x27;</span>, validateFooter);
    &#125;
&#125;</pre></td></tr></table></figure><p>And now run <code>hint https://webhint.io</code> in the terminal and wait for the
scan to complete. Ta-Dah! We get the result below. It reports an error since we
don’t have the <code>(c) webhint</code> footer in the webhint.io home page.</p>
<figure class="highlight text"><table><tr><td class="code"><pre>https://webhint.io/
line 1  col 8379  Error  &quot;(c) webhint&quot; is not included in the footer.  validate-footer
✖ Found 1 error and 0 warnings

✖ Found a total of 1 error and 0 warnings</pre></td></tr></table></figure><p>You might be wondering what if the page doesn’t include a footer at all, then
the <code>footer::element</code> event will never be emitted. You can find the completed
code to address this in <a target="_blank" href="https://github.com/qzhou1607/sonarwhal-external-rule-demo/blob/9e350afa23e4bd3245745afddc3a0cef4795f60b/src/rules/validate-footer/validate-footer.ts" >validate-footer.ts</a> of <a target="_blank" href="https://github.com/qzhou1607/sonarwhal-external-rule-demo" >this
repository</a>. The general idea is to subscribe the hint to another
event <code>traverse::end</code>, and validate the existence of the <code>footer</code> element at the
end of the DOM tree traversal.</p>
<h2 id=how-do-we-config-the-hint>How do we config the hint?<a href="#how-do-we-config-the-hint" class="headerlink" title="How do we config the hint?"></a></h2><p>So what if you decided to change the copyright text content? Altering the hint
itself every time is messy, and webhint makes it easy to add config options
for a hint, You have access to the config properties through
<code>context.hintOptions</code> and you can load the dynamic value of the target string
when the hint is loaded.</p>
<p>In our case, we define a config option with the key of <code>stringToBeIncluded</code>. And
if this config is not defined, the target string falls back to <code>(c) webhint</code>.
Meanwhile, we also need to specify the JSON schema of the configurable options
in the <code>meta</code> part of the hint constructor. This helps the hint to decide if a
config option is valid before using it.</p>
<figure class="highlight ts"><table><tr><td class="code"><pre><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CopyrightHint</span> <span class="hljs-keyword">implements</span> IHint &#123;
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">readonly</span> <span class="hljs-attr">meta</span>: <span class="hljs-title class_">HintMetadata</span> = &#123;
        <span class="hljs-attr">docs</span>: &#123;
            <span class="hljs-attr">category</span>: <span class="hljs-title class_">Category</span>.<span class="hljs-property">other</span>,
            <span class="hljs-attr">description</span>: <span class="hljs-string">`A new hint to validate footer`</span>
        &#125;,
        <span class="hljs-attr">id</span>: <span class="hljs-string">&#x27;copyright&#x27;</span>,
        <span class="hljs-attr">schema</span>: [&#123;
            <span class="hljs-attr">additionalProperties</span>: <span class="hljs-literal">false</span>,
            <span class="hljs-attr">properties</span>: &#123;
                <span class="hljs-comment">// Define JSON schema for the config options.</span>
                <span class="hljs-attr">stringToBeIncluded</span>: &#123; <span class="hljs-attr">type</span>: <span class="hljs-string">&#x27;string&#x27;</span> &#125;
            &#125;
        &#125;],
        <span class="hljs-attr">scope</span>: <span class="hljs-title class_">HintScope</span>.<span class="hljs-property">any</span>
    &#125;

    <span class="hljs-keyword">public</span> <span class="hljs-title function_">constructor</span>(<span class="hljs-params">context: HintContext</span>) &#123;
        <span class="hljs-keyword">let</span> stringToBeIncluded;

        <span class="hljs-keyword">const</span> <span class="hljs-title function_">loadHintConfigs</span> = (<span class="hljs-params"></span>) =&gt; &#123;
            <span class="hljs-comment">// Load Config options.</span>
            stringToBeIncluded = (context.<span class="hljs-property">hintOptions</span> &amp;&amp; context.<span class="hljs-property">hintOptions</span>.<span class="hljs-property">stringToBeIncluded</span>) || <span class="hljs-string">`(c) webhint`</span>;
        &#125;;

        <span class="hljs-keyword">const</span> validateFooter = <span class="hljs-keyword">async</span> (<span class="hljs-attr">elementFound</span>: <span class="hljs-title class_">ElementFound</span>) =&gt; &#123; <span class="hljs-comment">/* ... */</span> &#125;;

        <span class="hljs-title function_">loadHintConfigs</span>();

        context.<span class="hljs-title function_">on</span>(<span class="hljs-string">&#x27;element::footer&#x27;</span>, validateFooter);
    &#125;
&#125;</pre></td></tr></table></figure><p>Accordingly, when running webhint, we need to pass in the config values. We do
it in the config file for webhint, <code>.hintrc</code> in the root directory. For
example, if we’d like to validate the presence of <code>(c) webhint.com</code> in the
footer instead, we define the value of <code>stringToBeIncluded</code> in an object
following the severity level.</p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="hljs-punctuation">&#123;</span>
    <span class="hljs-attr">&quot;validate-footer&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
    <span class="hljs-string">&quot;error&quot;</span><span class="hljs-punctuation">,</span>
        <span class="hljs-punctuation">&#123;</span>
            <span class="hljs-attr">&quot;stringToBeIncluded&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;(c) webhint.io&quot;</span>
        <span class="hljs-punctuation">&#125;</span>
    <span class="hljs-punctuation">]</span>
<span class="hljs-punctuation">&#125;</span></pre></td></tr></table></figure><p>Now let’s run the hint again and here is what we get. Did you notice that now
instead of checking for <code>(c) webhint</code>, the hint reports the missing of <code>(c) webhint.io</code>? Hooray!</p>
<figure class="highlight text"><table><tr><td class="code"><pre>https://webhint.io/
line 1  col 8403  Error  &quot;(c) webhint.io&quot; is not included in the footer.  validate-footer
✖ Found 1 error and 0 warnings

✖ Found a total of 1 error and 0 warnings</pre></td></tr></table></figure><h2 id=how-do-we-add-the-tests>How do we add the tests?<a href="#how-do-we-add-the-tests" class="headerlink" title="How do we add the tests?"></a></h2><p>Navigate to <code>src/tests/validate-footer/test.ts</code>, we will start from the
generated template. The <code>testHint</code> method in the hintRunner takes three
arguments,the <em>name</em> of the hint, the <em>tests</em>, and the <em>hint config options</em>
(optional). The <em>tests</em> are defined as an array of objects, with each object
representing a test scenario. By defining <code>serverConfig</code> in each test, we are
able to mock the response from a target website and webhint will compare the
actual scanning result with the messages listed in reports. The
<code>generateHTMLPage</code> helper function shipped with webhint comes in handy as a
wrapper when you need HTML containing an element of interest. Here is what the
tests look like, three scenarios are mocked:</p>
<ul>
<li>A footer exists and it contains the target string. <code>pass</code></li>
<li>No footer exists in the page.  <code>fail</code></li>
<li>A footer exists, but it doesn’t contain the target string. <code>fail</code></li>
</ul>
<figure class="highlight ts"><table><tr><td class="code"><pre><span class="hljs-keyword">const</span> footer = &#123;
    <span class="hljs-attr">noFooter</span>: <span class="hljs-string">``</span>,
    <span class="hljs-attr">noProblem</span>: <span class="hljs-string">`&lt;footer&gt;(c) webhint&lt;/footer&gt;`</span>,
    <span class="hljs-attr">wrongTextInFooter</span>: <span class="hljs-string">`&lt;footer&gt;(c) webhint&lt;/footer&gt;`</span>
&#125;;

<span class="hljs-keyword">const</span> <span class="hljs-attr">defaultTests</span>: <span class="hljs-title class_">HintTest</span>[] = [
    &#123;
        <span class="hljs-attr">name</span>: <span class="hljs-string">`Footer exists and it contains &#x27;(c) webhint&#x27;`</span>,
        <span class="hljs-attr">serverConfig</span>: <span class="hljs-title function_">generateHTMLPage</span>(<span class="hljs-string">&#x27;&#x27;</span>, footer.<span class="hljs-property">noProblem</span>)
    &#125;,
    &#123;
        <span class="hljs-attr">name</span>: <span class="hljs-string">`Footer doesn&#x27;t exist`</span>,
        <span class="hljs-attr">reports</span>: [&#123; <span class="hljs-attr">message</span>: <span class="hljs-string">`&lt;footer&gt; element doesn&#x27;t exist in this page.`</span> &#125;],
        <span class="hljs-attr">serverConfig</span>: <span class="hljs-title function_">generateHTMLPage</span>(<span class="hljs-string">&#x27;&#x27;</span>, footer.<span class="hljs-property">noFooter</span>)
    &#125;,
    &#123;
        <span class="hljs-attr">name</span>: <span class="hljs-string">`Footer exists, but doesn&#x27;t contain &#x27;(c) webhint&#x27;`</span>,
        <span class="hljs-attr">reports</span>: [&#123; <span class="hljs-attr">message</span>: <span class="hljs-string">`&quot;(c) webhint&quot; is not included in the footer.`</span> &#125;],
        <span class="hljs-attr">serverConfig</span>: <span class="hljs-title function_">generateHTMLPage</span>(<span class="hljs-string">&#x27;&#x27;</span>, footer.<span class="hljs-property">wrongTextInFooter</span>)
    &#125;
];

<span class="hljs-comment">// Tests that use the default target string.</span>
hintRunner.<span class="hljs-title function_">testHint</span>(hintPath, defaultTests);</pre></td></tr></table></figure><p>Run <code>npm run test</code> in the terminal, and webhint will run them in all the
available connectors.</p>
<p>See the complete code example in <a target="_blank" href="https://github.com/qzhou1607/sonarwhal-external-rule-demo" >this repository</a>.</p>
  </div></div><a href="#main" class="anchor-top" hidden aria-label="back to top">top</a></div></article>  </main> <footer class="footer footer--home"><div class="footer-nav container">  <div class="footer-nav__item"><p class="category"><a href="/docs/user-guide/">Get webhint</a></p><ul>  <li><a href="/docs/user-guide/extensions/extension-browser/">In browser DevTools</a></li>  <li><a href="/docs/user-guide/extensions/vscode-webhint/">In VS Code</a></li>  <li><a href="/docs/user-guide/">Standalone CLI</a></li>  </ul></div>  <div class="footer-nav__item"><p class="category"><a href="">Documentation</a></p><ul>  <li><a href="/docs/contributor-guide/">Contributor Guide</a></li>  <li><a href="/docs/user-guide/hints/">Hints</a></li>  <li><a href="/docs/user-guide/">User Guide</a></li>  </ul></div>  <div class="footer-nav__item"><p class="category"><a href="/about/">About</a></p><ul>  <li><a href="/about/project_charter/">Project Charter</a></li>  <li><a href="/about/faq/">FAQ</a></li>  <li><a href="/about/changelog/">Changelog</a></li>  <li><a href="/about/governance/">Governance</a></li>  <li><a target="_blank" rel="noopener" href="https://js.foundation/community/code-of-conduct">Code of Conduct</a></li>  </ul></div>  <ul class="footer-nav__item social-list"><li class="github-icon"><a target="_blank" rel="noopener" href="https://github.com/webhintio" aria-label="Follow webhint on GitHub"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 25 25"><path class="github-icon-svg" d="M12.5.4C5.7.4.2 5.9.2 12.7c0 5.4 3.5 10 8.4 11.7.6.1.8-.3.8-.6v-2.1C6 22.4 5.3 20 5.3 20c-.6-1.4-1.4-1.8-1.4-1.8-1.1-.7.1-.7.1-.7 1.2.1 1.9 1.3 1.9 1.3 1.1 1.9 2.9 1.3 3.6 1 .1-.8.4-1.3.8-1.6-2.7-.3-5.6-1.4-5.6-6.1 0-1.3.5-2.4 1.3-3.3-.2-.4-.6-1.6 0-3.3 0 0 1-.3 3.4 1.3 1-.3 2-.4 3.1-.4 1 0 2.1.1 3.1.4C17.9 5.2 19 5.5 19 5.5c.7 1.7.2 2.9.1 3.3.8.9 1.3 2 1.3 3.3 0 4.7-2.9 5.8-5.6 6.1.4.4.8 1.1.8 2.3v3.4c0 .3.2.7.8.6 4.9-1.6 8.4-6.2 8.4-11.7C24.8 5.9 19.3.4 12.5.4"/></svg></a></li><li class="twitter-icon"><a target="_blank" rel="noopener" href="https://twitter.com/webhintio" aria-label="Follow webhint on Twitter"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 25 24"><path class="twitter-icon-svg" d="M25 4.4c-.9.4-1.9.7-2.9.8 1-.6 1.8-1.6 2.2-2.8-1 .6-2.1 1-3.2 1.2-.9-1-2.2-1.6-3.7-1.6-2.8 0-5 2.3-5 5 0 .4 0 .8.1 1.2C8.3 8 4.6 6 2.1 2.9c-.4.8-.7 1.6-.7 2.6 0 1.8.9 3.3 2.2 4.2-.8-.1-1.5-.3-2.2-.7v.1c0 2.4 1.7 4.5 4.1 5-.4.1-.9.2-1.3.2-.3 0-.6 0-.9-.1.6 2 2.5 3.5 4.7 3.5-1.9 1.3-4 2.1-6.4 2.1-.4 0-.8 0-1.2-.1C2.6 21.2 5.3 22 8.1 22c9.3 0 14.4-7.7 14.4-14.4v-.7c1-.6 1.8-1.5 2.5-2.5"/></svg></a></li><li class="medium-icon"><a target="_blank" rel="noopener" href="https://medium.com/webhint" aria-label="Follow webhint on Medium"><svg xmlns="http://www.w3.org/2000/svg" viewBox="4 2 40 40"><path d="M5 40V5h35v35H5zm8.56-12.63c0 .56-.03.7-.32 1.03l-2.45 3v.38h6.9v-.4l-2.4-2.98c-.3-.34-.35-.5-.35-1.03v-8.95l6.13 13.36h.7L27 18.42v10.64c0 .3 0 .35-.2.53L25 31.4v.37h9.2v-.4l-1.82-1.8c-.2-.17-.22-.23-.22-.52v-13.1c0-.3.03-.36.2-.54l1.83-1.8v-.32h-6.5L23.1 24.8l-5.2-11.55h-6.8v.4l2.14 2.63c.24.3.3.37.3.77V27.4z" class="medium-icon-svg"/></svg></a></li><li class="openjsf-icon"><a target="_blank" rel="noopener" href="https://openjsf.org" aria-label="Visit the OpenJS Foundation home page"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1000 314.4"><linearGradient id="openjsf-logo-gradient" gradientUnits="userSpaceOnUse" x1="28.765" y1="49.831" x2="243.506" y2="264.571"><stop offset=".214" stop-color="#0075c9"/><stop offset=".707" stop-color="#80bc00"/><stop offset="1" stop-color="#fde021"/></linearGradient><path d="M271.4 78.1L137 .5l-.9-.5-.9.5L1.6 77.7l-.7.4-.9.5v157.2l.9.5 134.4 77.6.9.5.9-.5 132.6-76.5 1.8-1 .9-.5V78.6l-1-.5zm-148.7-58L89.8 77H24.1l98.6-56.9zM84.4 86.4L69 113.1 22.8 86.4h61.6zm-12 39.4l54.3 31.4-54.3 31.4-18.1-31.4 18.1-31.4zm-8-4.6L49 147.9 18.1 94.5l46.3 26.7zm-53.7-20.9l32.9 56.9-32.9 56.9V100.3zm38.2 66.3l15.4 26.7L18.1 220l30.8-53.4zM69 201.3L84.4 228H22.8L69 201.3zm-44.9 36.1h65.7l32.9 56.9-98.6-56.9zm107.4 53.4l-30.8-53.4h30.8v53.4zm0-62.8H95.2l-18.1-31.4 54.3-31.4V228zm0-78.9l-54.3-31.4 18.1-31.4h36.2v62.8zm0-72.1h-30.8l30.8-53.4V77zm76.4 44.2l46.2-26.7-30.8 53.4-15.4-26.7zm10 36l-18.1 31.4-54.3-31.4 54.3-31.4 18.1 31.4zm-14.7-44.1l-15.4-26.7h61.6l-46.2 26.7zM248.1 77h-65.7l-32.8-56.9L248.1 77zM140.8 23.6L171.6 77h-30.8V23.6zm0 62.8H177l18.1 31.4-54.3 31.4V86.4zm0 78.9l54.3 31.4L177 228h-36.2v-62.7zm0 72.1h30.8l-30.8 53.4v-53.4zm8.8 56.9l32.8-56.9h65.7l-98.5 56.9zm38.2-66.3l15.4-26.7 46.2 26.7h-61.6zm20.1-34.8l15.4-26.7 30.8 53.4-46.2-26.7zm53.7 20.9l-32.9-56.9 32.9-56.9v113.8z" fill="url(#openjsf-logo-gradient)"/><path class="openjsf-icon-svg" d="M308.4 202.7h64.2v5.8H315V257h52.2v6H315v49.9h-6.6zM383.8 279.7c0-19 15.2-34.4 34.5-34.4s34.2 15.4 34.2 34.4-14.9 34.5-34.2 34.5c-19.3 0-34.5-15.5-34.5-34.5m62.2 0c0-16.4-11.2-28.7-27.7-28.7s-28 12.3-28 28.7 11.5 28.9 28 28.9 27.7-12.5 27.7-28.9M469.9 288.5v-41.7h6.3v40.7c0 13.5 6.3 21.1 19 21.1 14.3 0 24.3-9.6 24.3-24.8v-37h6.3V313h-6.3l.2-14.6c-4.4 9.9-13.5 16-25.1 16-14.8 0-24.7-9.7-24.7-25.9M543 246.8h6.3l-.2 14.8c4.4-10 13.6-16.2 25.3-16.2 14.8 0 24.6 9.9 24.6 26.3V313h-6.3v-40.2c0-13.6-6.3-21.6-19.1-21.6-14.3 0-24.3 9.4-24.3 24.8v37H543v-66.2zM616.3 279.7c0-19.5 13.8-34.4 32.8-34.4 13.5 0 23.2 7.3 28 17.2v-66.6h6.3V313h-6.3l.3-16.5c-4.7 10.2-15.6 17.8-28.4 17.8-18.9-.1-32.7-15.1-32.7-34.6m61.3 0c0-16.4-11-28.7-27.7-28.7-16.4 0-26.9 12.3-26.9 28.7s10.5 28.9 26.9 28.9c16.7 0 27.7-12.5 27.7-28.9M748 271.4c0-14.9-6.8-20.6-17.7-20.6-10.1 0-16.9 4.2-21.6 11.4l-4.5-3.2c5.5-8.6 14.9-13.6 26.3-13.6 13.6 0 23.8 8.3 23.8 25.5v42.2H748l.3-10.2c-4.2 6.3-11.5 11.5-22.9 11.5-15.1 0-25-7-25-20.3 0-13.1 11.5-19.3 24.2-19.3H748v-3.4zm-22.6 8.5c-10.1 0-18.6 3.9-18.6 13.9 0 10.1 6.6 14.8 19.3 14.8 11 0 21.9-6.5 21.9-16.7v-12h-22.6zM782.5 295.4v-43.3h-10.4v-5.4h10.4v-23.2h6.3v23.2h19.1v5.4h-19.1v43.1c0 9.7 3.4 13.3 8.9 13.3 5.8 0 8.1-2.3 10.5-4.9l4.1 3.9c-3.2 3.7-7.1 6.6-14.6 6.6-8.4.1-15.2-5.2-15.2-18.7M829.5 218.2c0-3.1 2.6-5.4 5.4-5.4 2.8 0 5.4 2.3 5.4 5.4 0 3.2-2.6 5.3-5.4 5.3-2.8.1-5.4-2-5.4-5.3m2.3 28.6h6.3V313h-6.3v-66.2zM857.1 279.7c0-19 15.2-34.4 34.5-34.4s34.2 15.4 34.2 34.4-14.9 34.5-34.2 34.5c-19.2 0-34.5-15.5-34.5-34.5m62.3 0c0-16.4-11.2-28.7-27.7-28.7s-28 12.3-28 28.7 11.5 28.9 28 28.9 27.7-12.5 27.7-28.9M943.9 246.8h6.3l-.2 14.8c4.4-10 13.6-16.2 25.3-16.2 14.8 0 24.6 9.9 24.6 26.3V313h-6.3v-40.2c0-13.6-6.3-21.6-19.1-21.6-14.3 0-24.3 9.4-24.3 24.8v37h-6.3v-66.2zM308.4 73.1c0-41.4 31.8-71.3 71.7-71.3 39.6 0 71.5 29.8 71.5 71.3 0 41.4-31.9 71.3-71.5 71.3-39.9-.1-71.7-29.9-71.7-71.3m121 0c0-29.6-20.4-51.9-49.4-51.9s-49.6 22.3-49.6 51.9c0 29.6 20.6 51.9 49.6 51.9 29-.1 49.4-22.3 49.4-51.9M473.9 56.8h20.8l-.6 15.9c5.5-10.6 15.7-17.8 30.4-17.8 22 0 39.8 18.6 39.8 44.5s-18 44.9-40.2 44.9c-14.3 0-24.5-6.9-29.4-16.5v58h-20.8v-129zm69.2 42.6c0-15.5-9.4-26.1-24.3-26.1-15.1 0-24.9 10.6-24.9 26.1 0 16.1 9.8 26.7 24.9 26.7 15 .1 24.3-10.5 24.3-26.7M635 127c11.2 0 19.4-4.5 24.3-9.2l12 12.7c-8 8-19 13.9-36.1 13.9-29.4 0-48.4-19-48.4-44.7 0-25.5 20-44.7 45.7-44.7 29.2 0 45.7 21.6 44.3 51.7h-69C610.3 119 619.3 127 635 127m21.1-34.7c-1.8-11.6-9-20.2-23.3-20.2-13.3 0-22.5 7.3-24.9 20.2h48.2zM699.7 56.8h20.6l-.4 15.9c5.3-11.2 16.1-17.8 29-17.8 19 0 32.1 13.5 32.1 36.7v50.8h-20.6V93.3c0-12.3-5.7-19.4-17.8-19.4-13.5 0-22.3 8.2-22.3 22v46.5h-20.6V56.8zM803.5 120.9l17.6-10.8c4.9 8.8 10.6 14.9 20.8 14.9 11.6 0 19.2-5.5 19.2-21.6V3.7h21.6v100c0 27.6-16.5 40.6-39.8 40.6-20.6 0-32.8-10.6-39.4-23.4M904.9 115.6l17.8-9.8c6.5 10.8 14.9 19.4 31.8 19.4 14.1 0 24.1-7.6 24.1-19 0-12-8.2-17.4-23.3-24.1l-9.2-4.1c-20.2-9-32.5-19.2-32.5-40.6 0-20.6 15.9-35.3 39-35.3C971 2 983.5 9 991.8 23.9l-16.9 10.4c-5.3-9.2-11.4-13.5-22.3-13.5-11 0-18 6.7-18 16.1 0 10.4 5.9 15.1 20 21.2l9 4.1c23.7 10.4 36.3 21.4 36.3 43.7 0 24.3-19 38.4-45.1 38.4-26.3 0-42.2-13-49.9-28.7"/></svg></a></li></ul></div></footer> <script src="/static/scripts/treeview-54e979828f.js" integrity="sha384-VsYH3fD7SgMz9uDJ//T+K9HTnT0d3KEnDIHdcc8htlYrgZHpXStWu7gKniu7+Ya2" crossorigin="anonymous"></script> <script src="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.js" integrity="sha384-8uEk67aWSZHvjtAX9hf2AB+KzYcssy31vRRTi9oP81zHtyIj7PQGAykGbQpB1L2J" crossorigin="anonymous"></script><script src="/static/scripts/common-0cfb479c53.js" integrity="sha384-wOMtgTnli7Qkpwsb6QgS0Gpya9/5r0+T/sUgGBAW/tH0sfafWVCu29Ea1tXPVCyc" crossorigin="anonymous"></script><script>docsearch({apiKey:"2ee58f908e6d720c4f72a9645ce0e857",indexName:"webhint",inputSelector:"#search-input",appId:"0R8E5SPAFP",debug:!1})</script> </body></html>